{"ast":null,"code":"var _jsxFileName = \"/home/ivan/\\xC1rea de Trabalho/t8/t08_p11_trackit/src/components/today/TodayHabit.js\",\n    _s = $RefreshSig$();\n\nimport styled from \"styled-components\";\nimport { BsCheckSquareFill } from \"react-icons/bs\";\nimport { useContext, useState } from \"react\";\nimport axios from \"axios\";\nimport { Wrapper, Container, Habit, CurrentCount, HighestCount } from \"./TodayHabitStyled\";\nimport UserContext from \"../../contexts/UserContext\";\nimport TodayHabitsContext from \"../../contexts/TodayHabitsContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction TodayHabit(props) {\n  _s();\n\n  const {\n    name,\n    done,\n    highest,\n    current,\n    id\n  } = props;\n  const {\n    count,\n    setCount\n  } = useContext(TodayHabitsContext);\n  const {\n    userInfo\n  } = useContext(UserContext);\n  const [sequence, setSequence] = useState({\n    highest: highest,\n    current: current\n  });\n  const [isDone, setIsDone] = useState(done);\n  const config = {\n    headers: {\n      Authorization: `Bearer ${userInfo.token}`\n    }\n  };\n\n  function sendRequest(URL) {\n    if (isDone) {\n      const promise = axios.post(URL, {}, config);\n      promise.then(response => {\n        setCount(count - 1);\n\n        if (sequence.highest > sequence.current) {\n          setSequence({ ...sequence,\n            current: sequence.current - 1\n          });\n        } else if (sequence.highest === sequence.current) {\n          setSequence({\n            highest: sequence.highest - 1,\n            current: sequence.current - 1\n          });\n        }\n\n        setIsDone(false);\n      });\n      promise.catch(err => {});\n    } else if (!isDone) {\n      const promise = axios.post(URL, {}, config);\n      promise.then(response => {\n        setCount(count + 1);\n\n        if (sequence.highest > sequence.current) {\n          setSequence({ ...sequence,\n            current: sequence.current + 1\n          });\n        } else if (sequence.highest === sequence.current) {\n          setSequence({\n            highest: sequence.highest + 1,\n            current: sequence.current + 1\n          });\n        }\n\n        setIsDone(true);\n      });\n      promise.catch(err => {});\n    }\n  }\n\n  function toggleDoneHabit() {\n    if (isDone && userInfo.token) {\n      const URL = `https://mock-api.bootcamp.respondeai.com.br/api/v2/trackit/habits/${id}/uncheck`;\n      sendRequest(URL);\n    } else if (!isDone && userInfo.token) {\n      const URL = `https://mock-api.bootcamp.respondeai.com.br/api/v2/trackit/habits/${id}/check `;\n      sendRequest(URL);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Habit, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(CurrentCount, {\n            isDone: isDone,\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Sequ\\xEAncia Atual:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 8\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [sequence.current, \" dias\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 34\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(HighestCount, {\n            highest: sequence.highest,\n            current: sequence.current,\n            isDone: isDone,\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Seu recorde:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 8\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [sequence.highest, \" dias\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 30\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(BsCheckSquareFill, {\n        \"data-identifier\": \"done-habit-btn\",\n        onClick: toggleDoneHabit,\n        color: isDone ? \"#8FC549\" : \"#EBEBEB\",\n        size: \"70px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 3\n  }, this);\n}\n\n_s(TodayHabit, \"rJTzGJzAajgJpk/gZpqioW79KcE=\");\n\n_c = TodayHabit;\nexport default TodayHabit;\n\nvar _c;\n\n$RefreshReg$(_c, \"TodayHabit\");","map":{"version":3,"sources":["/home/ivan/Área de Trabalho/t8/t08_p11_trackit/src/components/today/TodayHabit.js"],"names":["styled","BsCheckSquareFill","useContext","useState","axios","Wrapper","Container","Habit","CurrentCount","HighestCount","UserContext","TodayHabitsContext","TodayHabit","props","name","done","highest","current","id","count","setCount","userInfo","sequence","setSequence","isDone","setIsDone","config","headers","Authorization","token","sendRequest","URL","promise","post","then","response","catch","err","toggleDoneHabit"],"mappings":"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","sourcesContent":["import styled from \"styled-components\";\nimport { BsCheckSquareFill } from \"react-icons/bs\";\nimport { useContext, useState } from \"react\";\nimport axios from \"axios\";\n\nimport {\n\tWrapper,\n\tContainer,\n\tHabit,\n\tCurrentCount,\n\tHighestCount,\n} from \"./TodayHabitStyled\";\nimport UserContext from \"../../contexts/UserContext\";\nimport TodayHabitsContext from \"../../contexts/TodayHabitsContext\";\n\nfunction TodayHabit(props) {\n\tconst { name, done, highest, current, id } = props;\n\tconst { count, setCount } = useContext(TodayHabitsContext);\n\tconst { userInfo } = useContext(UserContext);\n\tconst [sequence, setSequence] = useState({\n\t\thighest: highest,\n\t\tcurrent: current,\n\t});\n\tconst [isDone, setIsDone] = useState(done);\n\n\tconst config = {\n\t\theaders: {\n\t\t\tAuthorization: `Bearer ${userInfo.token}`,\n\t\t},\n\t};\n\n\tfunction sendRequest(URL) {\n\t\tif (isDone) {\n\t\t\tconst promise = axios.post(URL, {}, config);\n\t\t\tpromise.then((response) => {\n\t\t\t\tsetCount(count - 1);\n\t\t\t\tif (sequence.highest > sequence.current) {\n\t\t\t\t\tsetSequence({\n\t\t\t\t\t\t...sequence,\n\t\t\t\t\t\tcurrent: sequence.current - 1,\n\t\t\t\t\t});\n\t\t\t\t} else if (sequence.highest === sequence.current) {\n\t\t\t\t\tsetSequence({\n\t\t\t\t\t\thighest: sequence.highest - 1,\n\t\t\t\t\t\tcurrent: sequence.current - 1,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tsetIsDone(false);\n\t\t\t});\n\t\t\tpromise.catch((err) => {});\n\t\t} else if (!isDone) {\n\t\t\tconst promise = axios.post(URL, {}, config);\n\t\t\tpromise.then((response) => {\n\t\t\t\tsetCount(count + 1);\n\t\t\t\tif (sequence.highest > sequence.current) {\n\t\t\t\t\tsetSequence({\n\t\t\t\t\t\t...sequence,\n\t\t\t\t\t\tcurrent: sequence.current + 1,\n\t\t\t\t\t});\n\t\t\t\t} else if (sequence.highest === sequence.current) {\n\t\t\t\t\tsetSequence({\n\t\t\t\t\t\thighest: sequence.highest + 1,\n\t\t\t\t\t\tcurrent: sequence.current + 1,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tsetIsDone(true);\n\t\t\t});\n\t\t\tpromise.catch((err) => {});\n\t\t}\n\t}\n\n\tfunction toggleDoneHabit() {\n\t\tif (isDone && userInfo.token) {\n\t\t\tconst URL = `https://mock-api.bootcamp.respondeai.com.br/api/v2/trackit/habits/${id}/uncheck`;\n\t\t\tsendRequest(URL);\n\t\t} else if (!isDone && userInfo.token) {\n\t\t\tconst URL = `https://mock-api.bootcamp.respondeai.com.br/api/v2/trackit/habits/${id}/check `;\n\t\t\tsendRequest(URL);\n\t\t}\n\t}\n\n\treturn (\n\t\t<Wrapper>\n\t\t\t<Container>\n\t\t\t\t<Habit>\n\t\t\t\t\t<span>{name}</span>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<CurrentCount isDone={isDone}>\n\t\t\t\t\t\t\t<h2>Sequência Atual:</h2> <span>{sequence.current} dias</span>\n\t\t\t\t\t\t</CurrentCount>\n\n\t\t\t\t\t\t<HighestCount\n\t\t\t\t\t\t\thighest={sequence.highest}\n\t\t\t\t\t\t\tcurrent={sequence.current}\n\t\t\t\t\t\t\tisDone={isDone}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<h2>Seu recorde:</h2> <span>{sequence.highest} dias</span>\n\t\t\t\t\t\t</HighestCount>\n\t\t\t\t\t</div>\n\t\t\t\t</Habit>\n\n\t\t\t\t<BsCheckSquareFill data-identifier=\"done-habit-btn\"\n\t\t\t\t\tonClick={toggleDoneHabit}\n\t\t\t\t\tcolor={isDone ? \"#8FC549\" : \"#EBEBEB\"}\n\t\t\t\t\tsize=\"70px\"\n\t\t\t\t/>\n\t\t\t</Container>\n\t\t</Wrapper>\n\t);\n}\n\nexport default TodayHabit;\n"]},"metadata":{},"sourceType":"module"}